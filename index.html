<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="app_title">YouTube Subscriptions Manager</title>
    <meta
      name="description"
      content="내 YouTube 구독 채널 수를 확인하고, Export/Import로 구독 목록을 백업·정리·재적용하는 정적 웹 서비스."
    />
    <style>
      :root { color-scheme: light dark; }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; }
      main { max-width: 880px; margin: 0 auto; padding: 24px 16px 72px; }
      .topbar { display: flex; justify-content: space-between; align-items: center; gap: 10px; margin-bottom: 10px; }
      .brand { display: flex; align-items: center; gap: 10px; }
      .logo { width: 36px; height: 36px; border-radius: 10px; }
      h1 { margin: 0 0 10px; font-size: 26px; }
      h2 { margin: 28px 0 10px; font-size: 18px; }
      p { line-height: 1.55; margin: 10px 0; }
      .muted { opacity: 0.75; }
      .card { border: 1px solid color-mix(in srgb, currentColor 18%, transparent); border-radius: 12px; padding: 14px; }
      .row { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
      .row > * { flex: 0 0 auto; }
      input[type="text"] { width: min(720px, 100%); padding: 10px 12px; border-radius: 10px; border: 1px solid color-mix(in srgb, currentColor 22%, transparent); }
      select { padding: 8px 10px; border-radius: 10px; border: 1px solid color-mix(in srgb, currentColor 22%, transparent); background: transparent; }
      button { padding: 10px 12px; border-radius: 10px; border: 1px solid color-mix(in srgb, currentColor 22%, transparent); background: color-mix(in srgb, currentColor 6%, transparent); cursor: pointer; }
      button:disabled { opacity: 0.6; cursor: not-allowed; }
      code { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 0.95em; }
      .status { white-space: pre-wrap; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 12px; padding: 10px; border-radius: 10px; background: color-mix(in srgb, currentColor 6%, transparent); border: 1px solid color-mix(in srgb, currentColor 16%, transparent); }
      .danger { border-color: color-mix(in srgb, #e11d48 45%, transparent); }
      .danger button { border-color: color-mix(in srgb, #e11d48 45%, transparent); }
      .pill { display: inline-block; padding: 2px 8px; border-radius: 999px; border: 1px solid color-mix(in srgb, currentColor 22%, transparent); font-size: 12px; }
      .grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
      @media (min-width: 860px) { .grid { grid-template-columns: 1fr 1fr; } }
      .iconLink { display: inline-flex; align-items: center; justify-content: center; width: 38px; height: 38px; border-radius: 12px; border: 1px solid color-mix(in srgb, currentColor 18%, transparent); background: color-mix(in srgb, currentColor 6%, transparent); text-decoration: none; }
      .iconLink:hover { background: color-mix(in srgb, currentColor 10%, transparent); }
      .iconLink:focus-visible { outline: 2px solid color-mix(in srgb, currentColor 55%, transparent); outline-offset: 2px; }
      .bmcIcon { width: 22px; height: 22px; display: block; }
    </style>
  </head>
  <body>
    <main>
      <div class="topbar">
        <div class="brand">
          <img class="logo" src="./logo-120.svg" width="36" height="36" data-i18n="app_logo_alt" data-i18n-attr="alt" alt="App logo" />
          <h1 data-i18n="app_title">YouTube Subscriptions Manager</h1>
        </div>
        <div class="row" style="gap: 8px;">
          <label for="lang" class="muted" data-i18n="lang_label">언어</label>
          <select id="lang" aria-label="language select">
            <option value="ko">한국어</option>
            <option value="en">English</option>
            <option value="ja">日本語</option>
          </select>
        </div>
      </div>

      <p class="muted" data-i18n="app_intro_1" data-i18n-params='{"pill":"i18n:app_tag_pill"}'></p>
      <p class="muted">
        <span data-i18n="app_intro_2" data-i18n-params='{"strong":"i18n:app_intro_strong"}'></span>
      </p>

      <div class="grid">
        <section class="card" aria-label="OAuth settings">
          <h2 data-i18n="sec1_title">1) Google OAuth</h2>
          <p class="muted">
            <span data-i18n="sec1_desc"></span>
          </p>
          <div class="row" style="margin-top:10px;">
            <button id="authReadonly" data-i18n="btn_auth_readonly">Authorize (readonly)</button>
            <button id="authManage" data-i18n="btn_auth_manage">Authorize (manage)</button>
          </div>
          <details class="muted" style="margin-top:10px;">
            <summary data-i18n="sec1_help_summary">로그인이 안 되나요?</summary>
            <p style="margin-top:10px;" data-i18n="sec1_help_desc"></p>
            <div class="status" style="margin-top:10px;">
              <div><b data-i18n="sec1_help_origin_label">현재 사이트 출처</b></div>
              <code id="siteOrigin"></code>
            </div>
            <p style="margin-top:10px;" data-i18n="sec1_help_note"></p>
          </details>
        </section>

        <section class="card" aria-label="status">
          <h2 data-i18n="sec2_title">2) 내 구독 현황</h2>
          <div class="row">
            <button id="refreshCount" data-i18n="btn_refresh_count">Refresh count</button>
            <span class="pill"><span data-i18n="subs_label">Subscriptions</span>: <b id="subsCount">-</b></span>
          </div>
        </section>
      </div>

      <section class="card" aria-label="export" style="margin-top: 12px;">
        <h2 data-i18n="sec3_title">3) Export (다운로드)</h2>
        <p class="muted" data-i18n="sec3_desc">현재 구독 목록을 JSON/CSV 파일로 내려받습니다.</p>
        <div class="row">
          <button id="exportJson" data-i18n="btn_export_json">Export JSON</button>
          <button id="exportCsv" data-i18n="btn_export_csv">Export CSV</button>
        </div>
      </section>

      <section class="card danger" aria-label="cleanup" style="margin-top: 12px;">
        <h2 data-i18n="sec4_title">4) Cleanup (전체 구독 취소)</h2>
        <p class="muted" data-i18n="sec4_desc">
          Export를 먼저 수행한 뒤, typed confirm으로 한 번 더 확인하고 전체 구독을 취소합니다.
        </p>
        <div class="row">
          <button id="cleanupJson" data-i18n="btn_cleanup_json">Cleanup after Export (JSON)</button>
          <button id="cleanupCsv" data-i18n="btn_cleanup_csv">Cleanup after Export (CSV)</button>
        </div>
      </section>

      <section class="card" aria-label="import" style="margin-top: 12px;">
        <h2 data-i18n="sec5_title">5) Import (파일을 적용해서 구독 추가)</h2>
        <p class="muted" data-i18n="sec5_desc">
          Export한 파일(JSON/CSV)을 수정해서 업로드하면, 현재 구독 목록과 비교 후 부족한 채널을 구독 추가합니다.
        </p>
        <div class="row">
          <input id="importFile" type="file" accept=".json,.csv,application/json,text/csv" />
          <button id="applyImport" disabled data-i18n="btn_apply_import">Apply import (subscribe)</button>
        </div>
        <div id="importPreview" class="status" style="margin-top:10px;" data-i18n="import_no_file">No file loaded.</div>
      </section>

      <section class="card" aria-label="support" style="margin-top: 12px;">
        <h2 data-i18n="support_title">Support</h2>
        <p class="muted">
          <span data-i18n="support_desc">If this app helped you, consider supporting the project:</span>
          <a
            class="iconLink"
            href="https://buymeacoffee.com/e3pbwto"
            target="_blank"
            rel="noreferrer"
            data-i18n="support_buymeacoffee_aria"
            data-i18n-attr="aria-label,title"
            aria-label="Buy me a coffee"
            title="Buy me a coffee"
          >
            <svg class="bmcIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <defs>
                <linearGradient id="bmc_bg" x1="4" y1="3" x2="20" y2="21" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#FFD74A"/>
                  <stop offset="1" stop-color="#FFB800"/>
                </linearGradient>
              </defs>
              <circle cx="12" cy="12" r="10" fill="url(#bmc_bg)"/>
              <path d="M7.3 10.2c0-.7.6-1.3 1.3-1.3h5.3c.7 0 1.3.6 1.3 1.3v3.1c0 1.8-1.5 3.3-3.3 3.3H10.6c-1.8 0-3.3-1.5-3.3-3.3v-3.1z" fill="#111827" fill-opacity="0.9"/>
              <path d="M15.9 10.4h1c1.1 0 2 .9 2 2s-.9 2-2 2h-1" stroke="#111827" stroke-width="1.6" stroke-linecap="round" stroke-opacity="0.9"/>
              <path d="M10.2 8.1c0-.6.5-1 1-1h1.6c.6 0 1 .5 1 1" stroke="#111827" stroke-width="1.6" stroke-linecap="round" stroke-opacity="0.9"/>
              <path d="M12 18.9c2.9 0 4.2-1.6 4.2-1.6" stroke="#111827" stroke-width="1.4" stroke-linecap="round" stroke-opacity="0.45"/>
              <path d="M10.2 14.4c.8-.8 1.8-.2 1.8.7 0-.9 1-.9 1.7-.2.9.9-.2 2.1-1.7 3-1.6-.8-2.7-2-1.8-3.5z" fill="#EF4444"/>
            </svg>
          </a>
        </p>
        <p class="muted">
          <a href="./privacy.html" data-i18n="legal_privacy">Privacy Policy</a>
          ·
          <a href="./terms.html" data-i18n="legal_terms">Terms of Service</a>
        </p>
      </section>
    </main>

    <script type="module" src="/src/web/main.ts"></script>
  </body>
</html>

